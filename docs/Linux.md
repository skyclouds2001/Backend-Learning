# Linux

## Linux简介

操作系统
一种计算机软件
作为用户和计算机硬件之间的桥梁

linux系统内核（调度设备等）
+
系统级应用程序（自带应用程序）
=
linux发行版

虚拟机

笔记
虚拟机 VMware Workstation
Linux 发行 cent OS & Ubuntu

操作系统使用方式 - 图形化 & 命令

## 常用Linux命令

目录结构：树型结构、唯一根目录（/）、使用/表示

命令行：Linux终端Terminal
命令：Linux程序

命令格式：`command [-options] [parameter]`
* command 命令本身
* -options 选项
* parameter 命令参数

路径：
* 相对路径
* 绝对路径
* 特殊路径符号
  * .  当前目录
  * ..  上一级目录
  * ~  HOME目录

常见命令：
* `ls [-a -l -h] [Linux路径]` 列出当前目录（或给定目录）的内容（默认以平铺形式）（默认加载路径为/home/<用户名>）
  * -a 列出全部文件（包括隐藏文件，以.开头的文件）
  * -l 以列表形式展示内容并显示更多信息
  * -h 以易读形式列出文件大小（需与-l配合使用）
* `cd [Linux路径]` 切换工作目录（默认返回用户HOME目录）
* `pwd` 查看当前所在的工作目录
* `mkdir [-p] Linux路径` 创建新的目录
  * -p 自动创建不存在的父目录
  * 需注意权限管控问题，默认用户仅可在HOME内操作
* `touch Linux路径` 创建文件
* `cat Linux路径` 查看文件内容
* `more Linux路径` 查看文件内容（特别的，支持翻页）
  * 空格 翻页查看
  * q 退出查看
* `cp [-r] Linux路径|被复制 Linux路径|复制` 复制文件&文件夹
  * -r 用于启用文件夹复制功能
* `mv Linux路径|被复制 Linux路径|复制` 移动文件&文件夹
* `rm [-r -f] Linux路径,...` 删除文件、文件夹
  * -r 用于启用文件夹删除功能
  * -f 强制删除（不会显示提示信息）
  * 支持使用通配符*实现模糊匹配
* `grep [-n] 关键字 文件路径` 从文件中通过关键字过滤文件（内容输入端口）的行
* `wc [-c -m -l -w] 文件路径` 统计文件行数等信息
  * -c 统计bytes数量
  * -m 统计字符数量
  * -l 统计行数
  * -w 统计单词数量
  * 默认按 l w m c 的顺序
* 管道符 `|` 将管道符左边命令值作为右边命令的输入参数
* `which` 查找命令的程序文件位置
* `find 起始路径 [-name 被查找文件名 或 -size [+-]n[kMG]]` 搜索文件
  * 支持使用通配符执行查询
* `echo 输出内容` 在命令行中输出指定的内容
  * 可使用反引号，被包裹的内容将被作为命令执行
* `tail [--f -num] Linux路径` 查看文件尾部内容，跟踪文件最新更改
  * -f 持续跟踪
  * -num 查看尾部行数
* 重定向符
  * `>` 将左侧内容覆盖写入右侧指定文件中
  * `>>` 将左侧内容追加写入右侧指定文件中

vi|vim编辑器：

* 工作模式
  * 命令模式 以命令驱动执行功能
  * 输入模式 编辑和输入模式，可自由编辑文件内容
  * 底线命令模式 以:开始，处理退出保存等功能
* 使用
  * 进入 `vi filename`
  * 退出 `:wq`
  * 默认进入命令模式
  * 命令模式至输入模式 输入i、a、o
  * 输入模式至命令模式 ESC键
  * 命令模式至底线命令模式 输入:
  * 底线命令模式至命令模式 回车键
* 常用快捷键
  * i 当前光标处进入输入模式
  * a 当前光标之后进入输入模式
  * I 当前行开头进入输入模式
  * A 当前行结尾进入输入模式
  * o 当前光标下一行进入输入模式
  * O 当前光标上一行进入输入模式
  * 0 移动到当前行开头
  * $ 移动到当前行结尾
  * / 进入搜索模式
  * n 向下继续搜索
  * N 向上继续搜索
  * dd 删除当前行
  * yy 复制当前行
  * p 粘贴复制的内容
  * u 撤销更改
  * :q 仅退出
  * :wq 保存并退出
  * :q! 强制退出
  * :w 仅保存

## Linux 用户

root 用户 - 拥有更强大的权限

一般普通用户仅可在对应HOME目录内不受限，其余位置大都仅有只读和执行权限无修改权限

切换命令 `su [-] [用户名]` -建议带上，代表是否加载环境变量

可以使用`exit`回退至上一个用户或CTRL+D

sudo以root身份运行当前命令

Linux权限控制，包括对用户的
和对用户组的

支持多用户1、多用户组、用户加入多个组
权限管控单元是用户级别和用户组级别

### 用户组管理

root用户下

* `groupadd 用户组名` 创建用户组
* `groupdel 用户组名` 删除用户组

### 用户管理

* `useradd [-g -d] 用户名` 创建用户
  * -g 指定用户的组
  * -d 指定用户HOME路径，默认/home/<用户名>
* `userdel [-r] 用户名` 删除用户
  * -r 删除用户的HOME目录
* `id [用户名]` 查看用户信息（用户、用户组等），默认当前用户
* `usermod -aG 用户组名 用户名` 指定用户加入的指定用户组

* `getent passwd` 查看系统中的用户
  * 用户名:密码（x）:用户ID:组ID:描述信息（作用不大）:HOME目录:执行终端（默认bash）
* `getent group` 查看系统中的用户组
  * 组名称:组认证（x）:组ID:组包含用户列表

### 查看权限信息

使用ls命令

依次为：权限-用户-用户组
其中权限：首字母符号代表文件- or文件夹d or软链接l、所属用户权限、所属用户组权限、其他用户权限（无权限以-代表）
r代表读 - 文件可查看，文件夹可查看内容
w代表写 - 文件可修改，文件夹可创建删除改名操作
x代表执行 - 文件可作为程序执行，文件夹可进入

### 修改权限控制

`chmod [-R] 权限 文件or文件夹`

修改文件权限

-R 代表对文件夹内全部内容亦应用相同的操作

chmod -R u=rwx,g=rx,o=x hello.txt
chmod 751 hello.txt

权限符号可使用数字替代（0-7）（令r为4，w为2，x为1）

`chown [-R] [用户][:][用户组] 文件或文件夹`

修改文件所属用户或用户组

## Linux 实用操作

### 小技巧

强制停止（程序|命令） `CTRL+C`
退出或登出（账户|程序） `CTRL+D`
（但不可退出vi或vim）

查看历史输入命令 `history`
使用`!`自动执行上一次匹配前缀的

历史命令搜索 `CTRL+R`

光标移动
跳至命令开头 `CTRL+A`
跳至命令结尾 `CTRL+E`
命令左移一个单词 `CTRL+←`
命令右移一个单词 `CTRL+→`

清屏 `CTRL+L` `clear`

### 软件安装

(CentOS) .rpm
yum [-y] install wget
yum [-y] remove wget
yum search wget

(Ubuntu-WSL) .deb
apt install wget
apt remove wget
apt search wget

### systemctl

`systemctl start|stop|status|enable|disable <service>`
(Ubuntu-WSL)
sshd
...
(CentOS)
...
其他软件如ntp和httpd

`service <service> start|stop|status|enable|disable`

### 创建软链接

`ln -s <被链接文件或文件夹> <需链接去的目的地>`

类似 windows 下的快捷方式

选项 -s 即代表软链接

### 日期和时区

查看系统时间 `date [-d <语句>] [+格式化字符串]`

-d 按给定字符串显示日期

%Y %y %m %d %H %M %S %s

### IP地址和主机名

查看本机IP地址 `ifconfig`

127.0.0.1 代表本机
0.0.0.0 代表本机or任意IP访问

查看主机名 `hostname`

修改主机名 `hostnamectl`（CentOS）

域名解析 优先本地记录 /etc/hosts DNS服务器
